require File.expand_path('parameters/appstore_params.rb', __dir__)
require File.expand_path('parameters/project_params.rb', __dir__)

USERNAME = PROJECT_PARAMS[:APPSTORE_USERNAME]
APPLE_ID = PROJECT_PARAMS[:APPSTORE_APPLE_ID]
XCCONFIG_PATH = PROJECT_PARAMS[:XCCONFIG_PATH]

# --- TestFlight

private_lane :deploy_testflight do |options|
  # Retrieve app identifier from config
  app_identifier = get_xcconfig_value(
    path: XCCONFIG_PATH,
    name: 'V_BUNDLE_ID'
  )

	pilot(
	  username: USERNAME,
	  app_identifier: app_identifier,
    apple_id: APPLE_ID,
	  skip_submission: true,
	  skip_waiting_for_build_processing: true
	)
end
